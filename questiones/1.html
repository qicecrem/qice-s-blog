<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>在一段字符串中提取连续数字并转化存入整数数组</title>
    <link rel="stylesheet" href="../styles.css">
       
</head>
<body>
    <pre><code>
        #include<stdlib.h>
            #include <stdio.h>
             int string_to_int(char* p)
            {
                int num = 0;
                int sign = 1;
                int i = 0;
                if (p[0] == '-')
                {
                    sign = -1;
                    i = 1;
                }
                while (p[i] != '\0')
                {
                    if (p[i] >= '0' && p[i] <= '9')
                        num = num * 10 + (p[i] - '0');
                    i++;
                }
                return num * sign;
            }
            int main() {
                char arr[999];
            
                // 读取整行输入
                printf("请输入一个字符串：");
                fgets(arr, sizeof(arr), stdin);
            
                // 去掉换行符
                arr[strcspn(arr, "\n")] = '\0';
            
                char* p = arr;
                int count = 0; // 记录数字子串的个数
                char a[99][99];
               
                // 遍历字符串
                while (*p != '\0') {
                    // 如果当前字符是数字，则开始提取数字子串
                    if (*p >= '0' && *p <= '9') {
                        int idx = 0;
                        // 输出数字子串直到遇到非数字字符或者字符串结尾
                        while (*p >= '0' && *p <= '9') {
                            a[count][idx++] = *p;
                            p++;
                        }
                        a[count][idx] = '\0';// 每个数字子串输出后换行
                        count++;
                    }
                    else {
                        p++; // 跳过非数字字符
                    }
                }
                int qw[100];
                for (int i = 0; i < count; i++)
                {
                    qw[i] = string_to_int(a[i]);
                }
                printf("总共有 %d 个数字子串\n", count);
                for (int i = 0; i < count; i++)
                {
                    printf("%d ", qw[i]);
                }
                return 0;
            }
    </code></pre>
</body>
</html>
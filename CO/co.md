计算机系统=硬件+软件  
电子管->晶体管->集成电路->超大规模集成电路->多核处理器  
“程序存储”：指令以代码的形式事先输入到计算机的主存储器中，然后按其在存储器中的首地址执行程序的第 一条指令，以后就按该程序的规定顺序执行其他指令，直至程序执行结束。即按地址访问并顺序执行指令  
计算机按照此原理应具有5大功能：数据传送功能、数据存储功能、数据处理功能、操作控制功能、操作判断功能    
冯诺曼体系结构特点:
计算机硬件系统由五大部件组成(存储器、运算器、控制器、输出设备、输入设备)
指令和数据以同等地位存于存储器，可按地址寻访
指令和数据用二进制表示
指令由操作码和地址码组成
存储程序
以运算器为中心  
cpu区分指令和数据的依据：指令周期的不同阶段     
IR存放当下欲执行的指令；PC存放下一条指令的地址；  
MAR存放欲访问的存储单元地址；MDR存放从存储单元取来的数据！  
寄存器（CPU内部）> Cache(高速的SRAM) > 内存 （SDRAM）  
机器字长  
计算机的位数（机器字长），表示计算机进行一次整数运算(即定点整数运算)所能处理的二进制数据的位数。计算机字长通常选定为字节(8位)的整数倍
指令字长：一个指令字中包含的二进制代码的位数。  
存储字长：一个存储单元存储的二进制代码的长度。等于MDR(memory data register)的位数， 它们都必须是字节的整数倍。  
数据字长：数据总线一次能传送信息的位数，它可以不等于MDR的位数。  
数据通路带宽  
数据总线一次所能传送信息的位数。  
主存容量
MAR(memory address register)的位数反映存储单元的个数，如MAR为16位，表示存储单元为216 = 64K;若MDR为32位，则存储容量为216x32.
# 运算速度
吞吐量，指系统在单位时间内处理请求的数量 ；从用户观点看，它是评价计算机系统性能的综合参数
CPU时钟周期。通常为节拍脉冲或T周期，即主频的倒数，它是CPU中最小的时间单位，每个动作至少需要1个时钟周期。
CPI（Clock cycle Per Instruction），即执行一条指令所需的时钟周期数。
IPS(Instructions Per Second) =主频/平均CPI，每秒执行多少指令
计算机由运算器、控制器、存储器、输入设备及输出设备五大部分构成，现代计算机通常把运算器和控制器集成在一个芯片上，合称为中央处理器。
早期存储器的容量很小以运算器为中心现代计算机已经发展为以存储器为中心，使IO操作尽可能地绕过CPU,直接在IO设备和存储器之间完成，以提高系统的整体运行效率。
BCD码（Binary-Code Decimal码）
这是为了表示0和9，所以1010~1111都是违法的
如果运算后不在合法范围：加6或减6，然后进位或借位。
即：
从BCD码的最右边的4位开始（即最低位的BCD位）。
如果这4位二进制数大于1001（即十进制的9），则将这4位加6（即二进制的0110）。
重复这个过程，直到所有的BCD位都被检查和调整。
# 校验码
任意两个码字之间最少变化的二进制位数称为码距（最小不同位的个数），码距大于等于2的数据校验码开始具有检错的能力。码距越大，检错、纠错能力越强。奇偶校验码的码距等于2,可以检测出一位错误（或奇数位错误），但不能确定出错的位置，也不能检测出偶数位错误；海明码的码距大于2,因此不仅可以发现错误，还能指出错误的位置。仅靠增加奇偶校验位的位数不能提高正确性，还要考虑码距。
# 奇偶校验码
奇校验码：整个校验码（有效信息位和校验位）中一的个数为奇数
偶校验码：整个校验码（有效信息位和校验位）中一的个数为偶数
求偶校验位：对所有信息位进行异或运算，得到的结果即为偶校验位。
偶校验：对所有位（包括信息位和校验位）进行异或运算，结果为0，则无错；结果为1，则有错。

#海明校验码
海明码设计思路：将信息位分组进行偶校验->多个校验位->多个校验位标注出错位置
校验码位数：
信息位：n       校验位：k
   2^k>=n+k+1
确定校验码分布：
校验码pi放在海明位号为2^(i-1)的位置上，信息位按顺序放在其余位置。
求校验码的值：
设信息位D4D3D2D1，则校验位的值为：
p1=D1⊕D2⊕D4
p2=D1⊕D3⊕D4
p3=D2⊕D3⊕D4
校验方程：
s1=p1⊕D1⊕D2⊕D4
s2=p2⊕D1⊕D3⊕D4
s3=p3⊕D2⊕D3⊕D4
错误检测：
将s1s2s3转换为二进制，全为0则无误 得到的二进制数即为错误位置。

循环冗余校验：
循环几余校验码的思想：
数据发送、接受方约定一个“除数”
K个信息位+R个校验位作为“被除数”，添加校验位后需保证除法的余数为0
收到数据后，进行除法检查余数是否为0 若余数非0说明出错，则进行重传或纠错
例：
生成多项式G(x)=x^3+x^2+1,信息码101001.
1.k=信息码位数，R=生成多项式最高次幂  校验码位数N=k+R=9
   由生成多项式的二进制码1101
2.信息码移位R位，低位补0，得到101001000
3.对移位的信息码用生成多项式进行模2除法产生余数，得到（余数）校验码001
   模2除：相当于异或运算。
4.得到crc码：101001001

---
# 移码
X移=2^(n-1)+X (-2^(n-1)<=x<2^(n-1))
X移相当于将X沿数轴平移2^(n-1).
 


# IEE754浮点数标准
组成：IEEE 754标准规定了浮点数在计算机中的存储格式，它由三个部分组成：符号位（S）、指数位（E）和尾数位（M）。
符号位：符号位用来表示浮点数的正负，0表示正数，1表示负数。
指数位：指数位用移码（Excess Code）表示，这是一种偏置码，用于表示浮点数的指数部分。移码的偏置值通常是2^(k-1)-1，其中k是指数位的位数。
尾数位：尾数位采用原码表示，且尾数的最高位隐含了1（规格化浮点数），在计算时需要加上这个隐含的最高位1。  
| j | 阶码位数 | 尾数位数 | 偏置值 |    
|--|--------|-------------|-----|
|短|8|23|127|
|长|11|52|1023|

# 浮点数运算
①对阶：小阶向大阶靠齐，方便计算机对尾数进行处理。

②尾数加减：尾数常规加减。

③规格化：如果尾数加减出现类似0.0099517× 1012 时，需要“左规”；

如果尾数加减出现类似99.517107× 1012 时，需要“右规”。

④舍入：尾数位数有限，若规定只能保留6位有效尾数，则9.9517107× 1012 →9.95171× 1012 (多余的直接砍掉)或者，9.9517107× 1012 →9.95172× 1012 （若砍掉分非0，则入1)或者，也可以采用四舍五入的原则，当舍弃位≥5时，高位入1。

⑤判溢出：若规定阶码不能超过两位，则运算后阶码超出范围，则溢出。

# RAM
SRAM 常用作cache     DRAM 常用作 主存   
DRAM刷新：
以行为单位每次刷新一行存储单元
为什么用行列地址：减少选通线数量
如何刷新： 有硬件支持，读取一行信息后重新写入，占一个读写周期
何时刷新：1.分散刷新 每次读写完都刷新一行
         2.异步刷新：2ms内刷新一次
DRAM送行列地址分两次（地址线复用技术）（因为容量较大）
芯片容量=2^地址线数*数据线数  
 
RAM 易失性，断电后数据消失
ROM 非易失性，断电后数据不消失

MROM 掩模只读存储器，只能读，不能写
PROM 可编程只读存储器，可以写一次，写完后不能再写
EPROM 可擦可编程只读存储器，可以写一次，写完后可以擦除，然后再写
Flash Memory  闪存存储器（U盘，SD卡）可进行多次快速擦除重写 写比读慢。
SSD  固态硬盘，由Flash 芯片组成，与闪存核心区别在于控制单元不一样。


存取周期：可以连续读/写的最短时间间隔（=存取时间+恢复时间）
双端口RAM：作用：优化多核cpu访问一根内存条的速度
多体并行存储器：设存取周期T=4r
               高位交叉编址：连续读取n个存储字耗时n个存取周期
               低位交叉编制：连续读取n个存储字耗时T+（n-1）r
存取周期T，存取时间r，为了使流水线不间断，应保证模块数m>=T/r

位扩展
字扩展：
  线选法：n条线->n个片选信号 地址空间不连续
  译码片选法：n条线-> 2^n个片选信号 地址空间可连续          

#磁盘
性能指标：
1.容量：格式化与非格式化
2.记录密度：道密度，位密度，面密度
3.平均存取时间：寻道时间+旋转延迟时间+传输时间
4.数据传输率：
   假设磁盘转数为r（转/s），每条磁道容量为N个字节则数据传输率为Dr=rN；
磁盘地址：驱动器号|柱面（磁道）号|盘面号|扇区号
磁道阵列RAID：思想：利用磁盘的廉价的特点提高存储性能，可靠性和安全性
             RAID0：条带化，提高存取速度，没有容错能力
             RAID1：镜像磁盘互为备份
             RAID2-5：通过数据校验提高容错能力

SSD
原理：基于闪存技术，属于电可擦ROM，即EEPROM
组成：闪存翻译层：负责翻译逻辑块号，找到对应页（Page）
      存储介质：多个闪存芯片-每个芯片包含多个块-每个块包含多个页
读写性能特性： 以页为单位读/写-相当于磁盘的扇区
              以块为单位擦除，擦干净的块，其中每页可以写一次，读无限次
              支持随机访问，系统给定一个逻辑地址，闪存翻译层可以通过电路迅速定位到对应的物理地址
              读快写慢，要写的块如果有数据则不能写入，需要将块内其他页全部复制到一个新的块中，再写入新的页
磨损均衡技术：将擦除平均分布在各个块上以提高寿命。

Cache：
 设tc为访问一次Cache所需时间，tm为访问一次主存所需时间，
 命中率H：Cpu欲访问信息已在Cache中的概率
 未命中率M=1-H：Cpu欲访问信息不在Cache中的概率
 平均访问时间：T=H*tc+(1-H)*(tc+tm)  [先访问Cache再访问主存]
              T=H*tc+（1-H）*tm      [同时访问Cacahe和内存]
主存与Cache以块为单位进行数据交换
主存地址可拆分为块号和块内地址。
 
 全相联映射
 主存块可以放在Cache的任意位置
 主存地址结构：标记（整个主存块号）+块内地址
 优化：Cache存储空间充分，命中率高
 缺点：查找标记最慢，有可能需要查找对比所有行的标记


 直接映射：
 每个主存只能放在特定位置：
 Cache块号=主存块号%Cache总块数
 主存地址结构：标记（主存块号前几位）+行号（主存块号末几位）+块内地址
 优点：查找标记最快，只需要查找对应行的标记
 缺点：Cache存储空间利用不充分，命中率低


组相联映射
 Cache分成若干组，每个主存块可放到特定分组中的任意一个位置  组号=主存块号%分组数
主存地址结构：标记（主存块号前几位）+组号（主存块号末几位）+块内地址
优点：另外两种方式的折中，综合效果最好
n路线组相联映射-每n个Cache行为为一组

替换算法:
随机算法（RAND）：若Cache已满，则随机选择一块替换
      实现简单但完全没有考虑局部性原理，命中率低，实际效果不稳定
先进先出算法（FIFO）：若Cache已满，则替换最先进入Cache的块
      抖动现象：频繁的换入换出现象
近期最少使用算法（LRU）：为每一个Cache块设置一个计数器，用于记录每个Cache块多久没别访问。当Cache满后替换计数器最大的。
 ①命中时，所命中的行的计数器清零，比其低的计数器加1，其余不变
 ②未命中且还有空闲行时，新装入的行的计数器置0，其余非空闲行全加1；
 ③未命中且无空闲行时，计数值最大的行的信息块被淘汰，新装行的块的计数器置0，其余全加1。
 若被频繁访问的主存数量>Cache行的数量，则可能发生抖动。

最不经常使用算法（LFU）：为每一个Cache块设置一个计数器，用于记录每个Cache块被访问的次数。当Cache满后替换计数器最小的。
 LFU算法一一曾经被经常访问的主存块在未来不一定会用到 相关的块并没有很好地遵循局部性原理，因此实际运行效果不如LRU

写策略：
  写命中：
    写回法：当CPU对Cache写命中时，只修改Cache的内容，而不立即写入主存，只有当此块被换出时才写入主存
      减少了访存次数，但存在数据不一致的隐患
    全写法（写直通法，write-though）-当cpu和Cache写命中时必须把数据同时写入Cache和主存，一般使用写缓冲（write buffer）。
      访问次数增加，速度变慢，但更能保证数据一致性
      使用写缓冲，cpu写的速度很快，若写操作不频繁，则效果很好。若写操作很频繁，可能会因为写缓冲饱和而发生阻塞
写不命中：
   写分配法（write-allocate）-当cpu对Cache写不命中时，把主存中的块调入Cache，在Cache中修改。通常搭配写回法。
   非写分配法（not-write-allocate）-当cpu对Cache写不命中时只写入主存，不调入Cache搭配全写法使用
各级Cache之间常使用：全写法+非写分配法
Cache和主存间常采用：写回法+写分配法   
   
页式存储器
  页式存储系统：一个程序(进程)在逻辑上被分为若干个大小相等的“页面”，“页面”大小与“块”的大小相同。每个页面可以离散地放入不同的主存块中。

主存一辅存：实现虚拟存储系统，解决了主存容量不够的问题
Cache一主存：解决了主存与CPU速度不匹配的问题

指令（又称机器指令）
  是指计算机执行某种操作的命令，是计算机运行的最小基本功能单位
  一台计算机的所有指令的集合构成该机的指令系统，又称指令集

 一条指令就是机器语言的一个语句，它是一组有意义的二进制代码
 一条指令通常要包括操作码字段和地址码字段 
 零地址指令 OP
   不需要操作数，如空操作，停机，关中断等指令
   堆栈计算机，两个操作数隐含存放在栈顶和次栈顶，计算结果压回栈顶
   
补码：

IEE754：
1.真值为零的机器数：
   阶码E=0  尾数M=0
   正0：S=0 ；负零：S=1；
2.非规格化浮点数：
  阶码E=0，尾数M≠0.
3.无穷大的机器数：
  阶码E=全1，尾数M=0
  正无穷：S=0，负无穷：S=1
4.NaN（not a number），不是一个数
  阶码E=全1，位数M≠0；

指令系统的性能要求
  完备性  有效性 规整性  兼容性
不同操作数的指令:
  三地址指令
  二地址指令
  一地址指令
  零地址指令

定长操作码  
 例：某指令字长16位，具有三地址、二地址、一地址和零地址4类指令，每个地址占4位，采用定长操作码方案，最多可表示多少条指令？
 答：24=16条


  

  

  
